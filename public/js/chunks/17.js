(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{FoS3:function(e,t,r){"use strict";var s={},n=r("KHd+"),a=Object(n.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"rounded-2xl w-full bg-white py-6 px-4"},[this._t("default")],2)}),[],!1,null,"5a5e7338",null);t.a=a.exports},biP3:function(e,t,r){"use strict";var s={props:["href","title"]},n=r("KHd+"),a=Object(n.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"group cursor-pointer",on:{click:function(t){return e.link(e.href)}}},[r("i",{staticClass:"bx bx-left-arrow-alt transform group-hover:-translate-x-2 transition ease-out duration-300"}),e._v(" "+e._s(e.title))])}),[],!1,null,"7d80c7fd",null);t.a=a.exports},mGN0:function(e,t,r){"use strict";r.r(t);var s=r("hAWA"),n=r("biP3"),a=r("FoS3"),o=r("FQHZ"),l=r.n(o),i=(r("TtPJ"),r("V8i/"),r("LPyF")),c=r.n(i);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=l()(c.a),v={components:{AppLayout:s.a,BackTo:n.a,FilePond:p,AdminComponentDiv:a.a},data:function(){return{myFiles:[],table:{title:"Новая таблица",headings:[],error:!1},heading:{title:"",values:[""]},value:{value:""},form:this.$inertia.form({title:"",description:"",image:"",tables:[]},{bag:"default",resetOnSuccess:!1})}},methods:{create:function(){this.form.post(this.route("services.store"))},processFile:function(e){this.form.image=JSON.parse(this.$refs.pond.getFile().serverId).filename},addTable:function(){this.form.tables.push(f(f({},this.table),{},{title:Date.now().toString(),error:!1,headings:[f(f({},this.heading),{},{values:[f({},this.value)]})]}))},addColumn:function(e){e.headings.push(f(f({},this.heading),{},{values:[f({},this.value)]})),e.headings[e.headings.length-1].values.length=e.headings[0].values.length},addRow:function(e){for(var t=0;t<e.headings.length;t++)e.headings[t].values.push(f({},this.value))},filteredErrors:function(e){var t='[href="#'+this.form.tables[e].title.toLowerCase().replaceAll(" ","-")+'"]';for(var r in this.$page.errors){var s=new RegExp("tables."+e,"g");if(this.$page.errors.hasOwnProperty(r)&&r.match(s))return this.form.tables[e].error=!0,document.querySelectorAll(t)[0].parentElement.classList.add("error"),!0}return this.form.tables[e].error=!1,document.querySelectorAll(t)[0].parentElement.classList.remove("error"),!1},removeColumn:function(e,t){this.form.tables[t].headings.splice(e,1)},removeRow:function(e,t){this.form.tables[t].headings.forEach((function(t){t.values.splice(e,1)}))},removeTable:function(e){this.form.tables.splice(e,1),2===document.getElementsByClassName("tabs-component-tab").length&&(document.getElementsByClassName("tabs-component-tab")[0].classList.add("is-active"),document.getElementsByClassName("tabs-component-panel")[0].style.display="block")}},updated:function(){var e=this;this.form.tables.forEach((function(t,r){e.filteredErrors(r)}))}},m=r("KHd+"),b=Object(m.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-layout",[r("div",{staticClass:"container mx-auto py-16"},[r("div",{staticClass:"mb-5"},[r("back-to",{attrs:{href:e.route("services.index"),title:"Назад"}})],1),e._v(" "),r("admin-component-div",{staticClass:"py-8 flex"},[r("form",{staticClass:"space-y-6 w-3/12 px-4 py-7 conform",on:{submit:function(t){return t.preventDefault(),e.create(t)}}},[r("vs-input",{attrs:{"label-placeholder":"Название",primary:""},scopedSlots:e._u([e.form.error("title")?{key:"message-danger",fn:function(){return[e._v("\n                        "+e._s(e.form.error("title"))+"\n                    ")]},proxy:!0}:null],null,!0),model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),e._v(" "),r("vs-input",{attrs:{"label-placeholder":"Описание",primary:""},scopedSlots:e._u([e.form.error("description")?{key:"message-danger",fn:function(){return[e._v("\n                        "+e._s(e.form.error("description"))+"\n                    ")]},proxy:!0}:null],null,!0),model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._v(" "),r("div",[r("file-pond",{ref:"pond",attrs:{name:"test","label-idle":"Drop files here...",files:e.myFiles,server:e.route("images.post-image",{dir:"services",prefix:"service"}).url()},on:{processfile:function(t){return e.processFile(t)}}}),e._v(" "),e.form.error("image")?r("p",{staticClass:"text-xs px-1 -mt-4 text-red-500"},[e._v("\n                        "+e._s(e.form.error("image"))+"\n                    ")]):e._e()],1),e._v(" "),r("vs-button",{attrs:{gradient:"",block:"",success:""}},[e._v("\n                    Создать")])],1),e._v(" "),r("div",{staticClass:"items-center w-9/12 justify-center flex flex-col"},[e.form.tables.length?r("div",{staticClass:"admin-service-tabs"},[r("tabs",{ref:"tabsComponent"},e._l(e.form.tables,(function(t,s){return r("tab",{key:s,staticClass:"custom",attrs:{name:t.title,error:t.error}},[r("div",{staticClass:"flex items-center"},[r("vs-input",{staticClass:"py-4",attrs:{primary:"",label:"Название таблицы"},scopedSlots:e._u([e.form.error("tables."+s+".title")?{key:"message-danger",fn:function(){return[e._v("\n                                        "+e._s(e.form.error("tables."+s+".title"))+"\n                                    ")]},proxy:!0}:null],null,!0),model:{value:t.title,callback:function(r){e.$set(t,"title",r)},expression:"formTable.title"}}),e._v(" "),r("vs-button",{attrs:{danger:""},on:{click:function(t){return e.removeTable(s)}}},[r("i",{staticClass:"bx bx-x"}),e._v(" Удалить таблицу\n                                ")])],1),e._v(" "),r("vs-table",{staticClass:"max-w-full",scopedSlots:e._u([{key:"thead",fn:function(){return[r("vs-tr",[e._l(t.headings,(function(t,n){return r("vs-th",{key:n,staticClass:"py-5"},[r("vs-input",{attrs:{primary:"",placeholder:"Пустое название колонки",border:""},scopedSlots:e._u([e.form.error("tables."+s+".headings."+n+".title")?{key:"message-danger",fn:function(){return[e._v("\n                                                    "+e._s(e.form.error("tables."+s+".headings."+n+".title"))+"\n                                                ")]},proxy:!0}:null],null,!0),model:{value:t.title,callback:function(r){e.$set(t,"title",r)},expression:"heading.title"}}),e._v(" "),0!==n?r("vs-button",{attrs:{icon:"",danger:""},on:{click:function(t){return e.removeColumn(n,s)}}},[r("i",{staticClass:"bx bx-x"})]):e._e()],1)})),e._v(" "),r("vs-th",[r("vs-button",{attrs:{flat:"",primary:""},on:{click:function(r){return e.addColumn(t)}}},[e._v("Добавить колонку")])],1)],2)]},proxy:!0},{key:"tbody",fn:function(){return[e._l(t.headings[0].values.length,(function(n,a){return r("vs-tr",{key:a},[e._l(t.headings.length,(function(n,o){return r("vs-td",{key:o},[e._v("\n                                            "+e._s(a)+" "+e._s(o)+"\n                                            "),r("vs-input",{attrs:{primary:"",border:"",placeholder:"Пустое значение"},scopedSlots:e._u([e.form.error("tables."+s+".headings."+o+".values."+a+".value")?{key:"message-danger",fn:function(){return[e._v("\n                                                    "+e._s(e.form.error("tables."+s+".headings."+o+".values."+a+".value"))+"\n                                                ")]},proxy:!0}:null],null,!0),model:{value:t.headings[o].values[a].value,callback:function(r){e.$set(t.headings[o].values[a],"value",r)},expression:"formTable.headings[j].values[i].value"}})],1)})),e._v(" "),r("vs-td",[0!==a?r("vs-button",{attrs:{icon:"",danger:""},on:{click:function(t){return e.removeRow(a,s)}}},[r("i",{staticClass:"bx bx-x"})]):e._e()],1)],2)})),e._v(" "),r("vs-tr",[r("vs-td",[r("vs-button",{attrs:{primary:"",flat:""},on:{click:function(r){return r.stopPropagation(),e.addRow(t)}}},[e._v("\n                                                Добавить строку\n                                            ")])],1)],1)]},proxy:!0}],null,!0)})],1)})),1)],1):e._e(),e._v(" "),r("vs-button",{on:{click:e.addTable}},[e._v("\n                    Создать таблицу\n                ")]),e._v(" "),e.form.error("tables")?r("p",{staticClass:"text-red-500 text-xs"},[e._v("\n                    "+e._s(e.form.error("tables"))+"\n                ")]):e._e()],1)])],1)])}),[],!1,null,"3dce798b",null);t.default=b.exports}}]);